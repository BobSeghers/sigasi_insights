---
title: "Emacs Code Coloring is Outdated"
layout: page 
pager: true
author: philippe.faes (Sigasi)
date: 2011-05-18
tags: 
  - Emacs
  - VHDL
---
<div class="content">
<p>In my series of how <a href="/content/why-emacs-so-great-and-why-we-want-beat-it">Sigasi is better than Emacs</a>, I want to talk about code coloring.</p><h2>Syntax Highlighting</h2><p>Code coloring consists of two parts: syntax highlighting and semantic highlighting. Most any editor does the former. The keywords are colored, strings, numbers and commets all highlighted in a separate color. All of this is possible using simple regular expressions (regex). </p><h2>Semantic Highlighting</h2><p>Semantic highlighting is more difficult. Semantic highlighting means that things get colored according to their <em>meaning</em>, not simply according to their lexical class. Datatypes get a different color from constants and signals get yet another color. In more advanced tools (Eclipse JDT), the same variable will get a different color depending on whether it is written or read. Of course, for any semantic highlighting to work, you need to parse and analyse the file. Short configuration files and regular expressions work great for syntax highlighting, but they fail for semantic highlighting.<br/><span class="inline inline-center"><img src="http://www.sigasi.com/sites/www.sigasi.com/files/images/HdtScreenSnapz002.png" alt="Sigasi's Semantic Highlighting" title="Sigasi's Semantic Highlighting" class="image image-_original " width="581" height="240"/><span class="caption"><strong>Sigasi's Semantic Highlighting</strong></span></span></p><h2>Fakin' It</h2><p>The Emacs VHDL mode tries to <a href="http://www.sigasi.com/content/vhdles-mode-major-mode-editing-vhdl-code#highlight">mimic semantic highlighting</a>, as do many general purpose editors. Datatypes are given colored green, but only the <em>standard</em> datatypes. Any datatype that you define yourself is treated as just another "name". Conversely, if you use the name of a standard datatype and you give a new meaning to it, it will be colored green. Overriding standard names like this is not a smart thing to do, but it is still legal.<br/>I know some engineers who adhere to a coding convention in order to get code coloring right. Signals end in <span class="geshifilter"><code class="vhdl geshifilter-vhdl">_s</code></span>, datatypes end in <span class="geshifilter"><code class="vhdl geshifilter-vhdl">_t</code></span>. This is a workaround. It works fine in the controlled environment of your own code. But it fails miserably when you have to inspect or reuse somebody else's code.<br/><span class="inline inline-center"><img src="http://www.sigasi.com/sites/www.sigasi.com/files/images/AquamacsScreenSnapz001.png" alt="Emacs VHDL mode Mimics Semantic Highliging" title="Emacs VHDL mode Mimics Semantic Highliging" class="image image-_original " width="634" height="135"/><span class="caption"><strong>Emacs VHDL mode Mimics Semantic Highliging</strong></span></span></p><h2>Regex</h2><p>The case of code coloring illustrates that regular expressions will not cut it any more. This technology has been pushed to its limits in tools like Emacs, with great results. But even the most skilled regular expression wizard has to give up at a certain point, and we've reached that point a while ago. In order to move forward and keep improving features like code coloring, regex will no longer serve you well. Built-in parsers are the answer.</p>  <div id="book-navigation-1518" class="book-navigation">            <div class="page-links clear-block">              <a href="/content/no-vhdl-libraries-emacs-vhdl-mode" class="page-previous" title="Go to previous page">&#8249; No VHDL Libraries in Emacs VHDL mode</a>                    <a href="/better-emacs-vhdl-mode" class="page-up" title="Go to parent page">up</a>                    <a href="/content/vhdl-emacs-mode-navigation-using-ctags-are-broken" class="page-next" title="Go to next page">VHDL Emacs mode navigation using ctags are broken &#8250;</a>          </div>      </div>  </div>

