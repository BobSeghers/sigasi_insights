---
title: 'To "to" or to "downto"... Ranges in VHDL'
layout: page 
pager: true
author: heeckhau (Sigasi)
date: 2014-09-05
tags: 
  - VHDL
---
<div class="content">
<p>Most <span class="caps">VHDL</span> designers write 'something <code>downto</code> something' in their code all the time. But what does this <code>downto</code> actually mean. And what is the difference with <code>to</code>?</p>	<p>The keywords <code>downto</code> and <code>to</code> specify the <strong>direction</strong> of <strong>ranges</strong> in <span class="caps">VHDL</span>. <code>downto</code> is descending (going down); <code>to</code> is ascending (going up).</p>	<h2>Ranges in Arrays</h2>	<p>When used in arrays, <code>downto</code> corresponds to <a href="http://en.wikipedia.org/wiki/Endianness" class="elf-external elf-icon">little endian</a>. This means that the least significant bit is stored at the lowest position. So in <code>L downto R</code>, <code>L</code> corresponds to the Most Significant Bit (<span class="caps">MSB</span>) and <code>R</code> to the Least Significant Bit (<span class="caps">LSB</span>).<br/><code>to</code> corresponds to <a href="http://en.wikipedia.org/wiki/Endianness" class="elf-external elf-icon">big endian</a>. So in <code>L to R</code>, <code>L</code> is the <span class="caps">LSB</span> and <code>R</code> the <span class="caps">MSB</span>.</p>	<p>In the <span class="caps">VHDL</span> snippet below, <code>little_endian</code> is initially <code>"0000_0001"</code> and <code>big_endian</code> is initially <code>"1000_0000"</code>:<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;">	<span style="color: #7f0055; font-weight: bold;">signal</span> big_endian <span style="color: #000066;">:</span> <span style="color: #808000;">std_logic_vector</span><span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span> <span style="color: #7f0055; font-weight: bold;">to</span> <span style="color: #7d7d7d;">7</span><span style="color: #000000;">)</span> <span style="color: #000066;">:=</span> <span style="color: #000000;">(</span> <span style="color: #7d7d7d;">0</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">1</span>', <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">signal</span> little_endian <span style="color: #000066;">:</span> <span style="color: #808000;">std_logic_vector</span><span style="color: #000000;">(</span><span style="color: #7d7d7d;">7</span> <span style="color: #7f0055; font-weight: bold;">downto</span> <span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span> <span style="color: #000066;">:=</span> <span style="color: #000000;">(</span> <span style="color: #7d7d7d;">0</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">1</span>', <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span></pre></div>	<p>There are advantages to both <code>downto</code> and <code>to</code>. However, most <span class="caps">VHDL</span> code I have seen, favors <code>downto</code>. The most important message is to stick to one direction for ranges. If you can, avoid mixing <code>downto</code> and <code>to</code> because this leads to confusion and bugs.</p>	<h3>Assigning arrays</h3>	<p>There are multiple ways to assign values to arrays, with varying degrees of elegance.</p>	<p>If have summarized a few ways below for following declaration: <code>signal my_array : std_logic_vector(7 downto 0);</code></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;">	<span style="color: #3f7f5f;">-- assign to element</span>	my_array<span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span>          <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span>	<span style="color: #3f7f5f;">-- assign slice</span>	my_array<span style="color: #000000;">(</span><span style="color: #7d7d7d;">3</span> <span style="color: #7f0055; font-weight: bold;">downto</span> <span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span> <span style="color: #000066;">&lt;=</span> <span style="color: #2a00ff;">"0001"</span><span style="color: #000066;">;</span>	<span style="color: #3f7f5f;">-- positional association</span>	my_array             <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span>'<span style="color: #7d7d7d;">0</span>', '<span style="color: #7d7d7d;">0</span>', '<span style="color: #7d7d7d;">0</span>', '<span style="color: #7d7d7d;">0</span>', '<span style="color: #7d7d7d;">0</span>', '<span style="color: #7d7d7d;">0</span>', '<span style="color: #7d7d7d;">0</span>', '<span style="color: #7d7d7d;">1</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span>	<span style="color: #3f7f5f;">-- named association variants</span>	my_array             <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">1</span>', <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span> 	my_array             <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">1</span>', <span style="color: #7d7d7d;">1</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">1</span>', <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span> 	my_array             <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span> | <span style="color: #7d7d7d;">1</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">1</span>', <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span>	my_array             <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span><span style="color: #7d7d7d;">1</span> <span style="color: #7f0055; font-weight: bold;">downto</span> <span style="color: #7d7d7d;">0</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">1</span>', <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span> </pre></div>	<p>Note that you can not mix positional and named association.</p>	<h2>Special cases</h2>	<h3>Null ranges</h3>	<p>A range is called a <strong>null range</strong>, when it specifies a empty subset. For descending ranges (<code>L downto R</code>), this is when <code>L &lt; R</code>. For ascending ranges (<code>L to R</code>) this is when <code>L &gt; R</code>. This sometimes happens for certain function parameters or generics. Your simulator should handle this without problems. </p>	<h3>Single element ranges</h3>	<p>A typical special case is a range with just one element:<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"> 	<span style="color: #7f0055; font-weight: bold;">signal</span> single_element_array <span style="color: #000066;">:</span> <span style="color: #808000;">std_logic_vector</span><span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span> <span style="color: #7f0055; font-weight: bold;">downto</span> <span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span><span style="color: #000066;">;</span></pre></div>	<p>Be careful with assignments:<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"> 	single_element_array <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">--illegal, single_element_array is still an array</span> 	single_element_array <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span>'<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span> <span style="color: #3f7f5f;">--also illegal, the optional parentheses do not turn this into an array</span> 	single_element_array <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- OK</span> 	single_element_array <span style="color: #000066;">&lt;=</span> <span style="color: #000000;">(</span><span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- OK</span> 	single_element_array<span style="color: #000000;">(</span><span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span> <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- OK</span></pre></div>	<h3>Unconstrained ranges</h3>	<p><span class="caps">VHDL</span> also allows you to define <strong>unconstrained arrays</strong>, which are array declarations where the <strong>type</strong> of the index values is specified, but not the <strong>bounds</strong>.<br/>A typical examples is  <code>std_ulogic_vector</code>:<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"> 	<span style="color: #7f0055; font-weight: bold;">type</span> <span style="color: #808000;">std_ulogic_vector</span> <span style="color: #7f0055; font-weight: bold;">is</span> array <span style="color: #000000;">(</span> <span style="color: #808000;">natural</span> <span style="color: #7f0055; font-weight: bold;">range</span> <span style="color: #000066;">&lt;&gt;</span> <span style="color: #000000;">)</span> <span style="color: #7f0055; font-weight: bold;">of</span> <span style="color: #808000;">std_ulogic</span><span style="color: #000066;">;</span></pre></div><br/>This defines <code>std_ulogic_vector</code> as an array type with indexes of type natural. The bounds can be specified via <em>object</em> creation or via a <em>subtype</em>.<div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"> 	<span style="color: #7f0055; font-weight: bold;">subtype</span> myarray <span style="color: #7f0055; font-weight: bold;">is</span> <span style="color: #808000;">std_ulogic_vector</span><span style="color: #000000;">(</span><span style="color: #7d7d7d;">7</span> <span style="color: #7f0055; font-weight: bold;">downto</span> <span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span><span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">constant</span> myconst <span style="color: #000066;">:</span> <span style="color: #808000;">std_ulogic_vector</span><span style="color: #000000;">(</span><span style="color: #7d7d7d;">7</span> <span style="color: #7f0055; font-weight: bold;">downto</span> <span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span> <span style="color: #000066;">:=</span> <span style="color: #000000;">(</span><span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000000;">)</span><span style="color: #000066;">;</span></pre></div>	<h3>Non integer ranges</h3>	<p>The index type of ranges does not need to be numeric, but it has to be discrete. For example: you can specify ranges for enumeration values, and use them to specify arrays.</p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;">	<span style="color: #7f0055; font-weight: bold;">type</span> myEnum <span style="color: #7f0055; font-weight: bold;">is</span> <span style="color: #000000;">(</span>a,b,c,d,e<span style="color: #000000;">)</span><span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">type</span> myArray <span style="color: #7f0055; font-weight: bold;">is</span> array<span style="color: #000000;">(</span>a <span style="color: #7f0055; font-weight: bold;">to</span> d<span style="color: #000000;">)</span> <span style="color: #7f0055; font-weight: bold;">of</span> <span style="color: #808000;">integer</span><span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">constant</span> myArrayConstant <span style="color: #000066;">:</span> myArray <span style="color: #000066;">:=</span> <span style="color: #000000;">(</span>a <span style="color: #000066;">=&gt;</span> <span style="color: #7d7d7d;">42</span>, <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> <span style="color: #7d7d7d;">0</span><span style="color: #000000;">)</span><span style="color: #000066;">;</span></pre></div>  <div id="book-navigation-1518" class="book-navigation">            <div class="page-links clear-block">              <a href="/content/signal-assignments-vhdl-withselect-whenelse-and-case" class="page-previous" title="Go to previous page">&#8249; Signal Assignments in VHDL: with/select, when/else and case</a>                    <a href="/content/vhdl-tips-tricks" class="page-up" title="Go to parent page">up</a>                    <a href="/content/vhdl-assert-and-report" class="page-next" title="Go to next page">VHDL Assert and Report &#8250;</a>          </div>      </div>  </div>

