---
title: 'VHDL case statements can do without the "others"'
layout: page 
pager: true
author: philippe.faes (Sigasi)
date: 2011-10-24
tags: 
  - case
  - mythbuster
  - others
  - VHDL
---
<div class="content">
<p>I was talking to some engineering students the other day, as they were doing a <span class="caps">VHDL</span> lab. I noticed a <span class="caps">VHDL</span> case statement for state machine with named states (enumerated data type). All states were handled in their <span class="caps">VHDL</span> case statement, and still they put an <code>others</code> section in their code. I had a hard time explaining that this clause was useless. The students mumbled something about their professor eating them alive if they'd forget the <code>others</code> and problems with uninitialized stated and high-impedance state. As you might know, these concepts are related to the <code>std_ulogic</code> and <code>std_logic</code> type, but not to enumerated types. </p>	<p>The <span class="caps">VHDL</span> language will force you to cover all cases. If you do not account for all cases, you are required to write a fallback case (<code>when others</code>), and that is what usually happens if you use <code>std_logic</code> types, because you don't want to enumerate all the meta-values. You <em>need</em> <code>others</code>, or your compiler will mark an error. In the case of enumerated data types, however, you can leave the <code>others</code> out.<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"><span style="color: #7f0055; font-weight: bold;">type</span> state_t <span style="color: #7f0055; font-weight: bold;">is</span> <span style="color: #000000;">(</span>s1, s2, s3<span style="color: #000000;">)</span><span style="color: #000066;">;</span></pre></div><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"><span style="color: #7f0055; font-weight: bold;">case</span> state <span style="color: #7f0055; font-weight: bold;">is</span>	<span style="color: #7f0055; font-weight: bold;">when</span> s1 <span style="color: #000066;">=&gt;</span>		isState3 <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span>		isOthers <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">when</span> s2 <span style="color: #000066;">=&gt;</span>		isState3 <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span>		isOthers <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">when</span> s3 <span style="color: #000066;">=&gt;</span>		isState3 <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">1</span>'<span style="color: #000066;">;</span>		isOthers <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> <span style="color: #3f7f5f;">-- There are no other states.</span>		isState3 <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">0</span>'<span style="color: #000066;">;</span>		isOthers <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">1</span>'<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- This <span class="caps">NEVER</span> happens!</span><span style="color: #7f0055; font-weight: bold;">end</span> <span style="color: #7f0055; font-weight: bold;">case</span><span style="color: #000066;">;</span></pre></div>	<p>In my mission to bust <span class="caps">VHDL</span> myths, I set up an experiment to demonstrate my case. I typed a <a href="/sites/www.sigasi.com/files/fsm2.vhd">piece of code with</a> and <a href="/sites/www.sigasi.com/files/fsm1.vhd">without</a> an <code>others</code> part in the <span class="caps">VHDL</span> case statement. The synthesis results are identical (as expected). To demonstrate even more clearly, I have created an output pin that would become <code>'1'</code> in the case of <code>others</code>. After synthesis, this output pin is clearly always <code>'0'</code>.</p>	<p><span class="inline inline-center"><img src="http://www.sigasi.com/sites/www.sigasi.com/files/images/fsm2.preview.png" alt="Netlist demonstrates that Others has no effect" title="Netlist demonstrates that Others has no effect" class="image image-preview " width="640" height="345"/><span class="caption"><strong>Netlist demonstrates that Others has no effect</strong></span></span></p>	<p><strong>Conclusion:</strong> if you have <em>not</em> covered all possible cases you need <code>others</code>. If you <em>have</em> covered all cases, leaving out <code>others</code> has no effect on the synthesis (or simulation) results. </p>	<p>I did not try <em>all possible settings</em> on <em>all possible synthesis tools</em>. If you have found a case that proves me wrong, please let us know.</p>  <div id="book-navigation-1518" class="book-navigation">            <div class="page-links clear-block">              <a href="/content/vhdl-pragmas" class="page-previous" title="Go to previous page">&#8249; VHDL Pragmas</a>                    <a href="/content/vhdl-tips-tricks" class="page-up" title="Go to parent page">up</a>                    <a href="/content/work-not-vhdl-library" class="page-next" title="Go to next page">WORK is not a VHDL Library &#8250;</a>          </div>      </div>  </div>

