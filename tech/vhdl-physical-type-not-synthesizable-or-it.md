---
title: "VHDL Physical Type is not Synthesizable, or is it?"
layout: page 
pager: true
author: philippe.faes (Sigasi)
date: 2012-10-11
tags: 
  - Altera
  - book
  - mythbuster
  - VHDL
  - VHDL synthesis
---
<div class="content">
<p>Everybody who has been taught VHDL in college or in a company with senior colleagues has heard the following <em>"wisdom"</em>:</p>	<blockquote>		<p><strong>Pysical types are for simulation only. They cannot be synthesized.</strong> [commonly heard claim &#8211; debunked in this article]</p>	</blockquote>	<p>This is the kind of knowledge was somehow made up in the latter years of the Cold War and was passed down from one generation of digital design engineers to the next. </p>	<p>Before we investigate this claim, let's examine what <span class="caps">VHDL</span> physical types are. A physical type is defined by a range and a number of units. For example, the pre-defined <code>time</code> type can have any integer value (the <em>range</em>) and has <em>units</em> including <code>ns</code>, <code>us</code> (microseconds) and even <code>hr</code> for hours. Internally, physical values are treated as integers, but the compiler adds some extra checks to make sure you don't mix the wrong physical values. The language definition says that adding, substracting, multiplication and division are always defined on physical types. This means you can add or subtract two values of the same physical type and you can multiply a physical value with an integer value or devide d physical value by an integer value. The result will always be a physical value. If you divide a physical value by another physical value, you get an integer:</p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"><span style="color: #7f0055; font-weight: bold;">assert</span> <span style="color: #7d7d7d;">1</span> sec <span style="color: #000066;">=</span> <span style="color: #7d7d7d;">1000</span> ms<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- convert units of the same physical type</span><span style="color: #7f0055; font-weight: bold;">assert</span> <span style="color: #7d7d7d;">1</span> sec + <span style="color: #7d7d7d;">20</span> ms <span style="color: #000066;">=</span> <span style="color: #7d7d7d;">1020</span> ms<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- add</span><span style="color: #7f0055; font-weight: bold;">assert</span> <span style="color: #7d7d7d;">2</span> sec &#8211; <span style="color: #7d7d7d;">100</span> ms <span style="color: #000066;">=</span> <span style="color: #7d7d7d;">1900</span> ms<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- subtract</span><span style="color: #7f0055; font-weight: bold;">assert</span> <span style="color: #7d7d7d;">10</span> sec / <span style="color: #7d7d7d;">2</span> <span style="color: #000066;">=</span> <span style="color: #7d7d7d;">5</span> sec<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- divide by integer</span><span style="color: #7f0055; font-weight: bold;">assert</span> <span style="color: #7d7d7d;">10</span> sec * <span style="color: #7d7d7d;">2</span> <span style="color: #000066;">=</span> <span style="color: #7d7d7d;">20</span> sec<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- multiply with integer</span><span style="color: #7f0055; font-weight: bold;">assert</span> <span style="color: #7d7d7d;">10</span> sec / <span style="color: #7d7d7d;">5</span> sec <span style="color: #000066;">=</span> <span style="color: #7d7d7d;">2</span><span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- divide two physical values of same type yields an integer</span></pre></div>	<p>In essence, physical values are just integer values with some extra compiler checks. So it stands to reason that a synthesis tool would just treat these physical types as integer types. Obviously, the synthesis tool will have no clue what the units represent in the physical world &#8211; but that doesn't stop it from using physical values.</p>	<p>Wouldn't it be great if we could write:<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"><span style="color: #7f0055; font-weight: bold;">wait</span> <span style="color: #7f0055; font-weight: bold;">for</span> <span style="color: #7d7d7d;">3</span> sec<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- not synthesizable (yet)</span><br/>ready <span style="color: #000066;">&lt;=</span> '<span style="color: #7d7d7d;">1</span>'<span style="color: #000066;">;</span></pre></div><br/>In our dreams, the synthesis tool would infer a counter that counts the number of clock ticks and lets us know when the three seconds have passed. Tough luck &#8211; no synthesis tools on the market can do this today. But they might some day!	<p>But how about this:<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"><span style="color: #7f0055; font-weight: bold;">constant</span> c<span style="color: #000066;">:</span> <span style="color: #808000;">integer</span> <span style="color: #000066;">:=</span> cycles_required <span style="color: #000066;">=</span> <span style="color: #7d7d7d;">3</span> sec / clock_frequency<span style="color: #000066;">;</span> <span style="color: #3f7f5f;">-- works fine!</span></pre></div><br/>Does this work? In simulation, yes obviously! But how about synthesis? You can debate all you want, but as a scientist you need to experiment. I've created a small example and fed it to Altera Quartus 11.1. Guess what: it works like a charm!	<p>So: <strong>the statement that physical types in <span class="caps">VHDL</span> do not synthesize is bogus</strong>. I'm sure you can write code that is completely not synthesizable and that uses physical types, but merely the fact that you use physical types does not stop the synthesizer. I'm happy to discuss which constructs do and don't synthesize (on a given synthesizer) and which constructs infer prohibitively large hardware (on a given synthesizer), but engineers should resist general claims that have not been tested.</p>	<p>Oh, and if you want to weaken the claim to "most synthesizers", I think you should present at least compilation reports for three different synthesizers.</p>	<p><strong>Edit:</strong> Also read my follow-up post with a <a href="/content/vhdl-physical-type-not-synthesizable-or-it-part-2">better example of synthesizable physical types</a></p>  <div id="book-navigation-1518" class="book-navigation">            <div class="page-links clear-block">              <a href="/content/use-and-library-vhdl" class="page-previous" title="Go to previous page">&#8249; "Use" and "Library" in VHDL</a>                    <a href="/content/vhdl-tips-tricks" class="page-up" title="Go to parent page">up</a>                    <a href="/content/scope-vhdl-use-clauses-and-vhdl-library-clauses" class="page-next" title="Go to next page">The scope of VHDL use clauses and VHDL library clauses &#8250;</a>          </div>      </div>  </div>

