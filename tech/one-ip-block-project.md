---
title: "One IP block per project"
layout: page 
pager: true
author: philippe.faes (Sigasi)
date: 2012-01-22
tags: 
  - best practices
  - hdt-2.0
  - howto
---
<div class="content">
<p>In earlier posts, I have explained that there are basically three ways of how to organize your <span class="caps">VHDL</span> code within your Sigasi environment. As a reminder: </p>	<ol><li><a href="/content/how-organize-your-vhdl-hardware-projects-sigasi">No organization</a></li>		<li><a href="/content/organizing-vhdl-project-one-design-one-folder">One design in one folder</a></li>		<li>Aggregation of reusable projects  (described in this article)</li>	</ol><h2>What is a reusable project?</h2>	<p>If you have a set of <span class="caps">VHDL</span> files, which may include packages, entities and architectures, we will call this a <em>reusable project</em>. The files are closely related and serve a single purpose. Often, these reusable projects take the form of an IP library (like the <span class="caps">IEEE</span> libraries), or an IP core (like a processor core or a memory controller). If you are working on large projects, such as a System on Chip (SoC) design, you are using IP cores.</p>	<h2>Setting it up: <span class="caps">STD</span> and <span class="caps">IEEE</span> </h2>	<p><em>You can turn off the automatic builder while you are setting up your projects: <strong>Project &gt; Build automatically</strong>. This will keep the compiler from starting before you have set things up correctly.</em></p>	<p>In this blog post, we assume that one project is compiled in one <span class="caps">VHDL</span> library. You can easily adapt if you have several projects in the same library. <br/>First, we need a project for <code>IEEE</code> and for <code>STD</code>. You could put those in a single project, called <code>default libraries</code> or something along those lines. But I prefer to stick to the rule of one project for one library. Just create a new <span class="caps">VHDL</span> project called <span class="caps">STD</span>, and remove the <span class="caps">IEEE</span> folders from that project. Next create a project called <span class="caps">IEEE</span> and remove the <span class="caps">STD</span> folders from that project. Now you need to make <span class="caps">IEEE</span> depend on <span class="caps">STD</span>: <strong>Project &gt; Properties &gt; Project References</strong> and select <span class="caps">STD</span> as a project reference for <span class="caps">IEEE</span>.</p>	<h2>Adding your own libraries</h2>	<p>Now that you have the first two libraries, it is time to add your own library. Select <strong>File &gt; New &gt; Empty <span class="caps">VHDL</span> Project</strong>. Clear the <strong>Use default location</strong> mark and select the location of your library. Choose the library name (we'll use <code>my_lib</code> for this example) as your project name and click <strong>Finish</strong>. Now, perform the following four steps:</p>	<ol><li>Set the project dependencies: <strong>Project &gt; Properties &gt; Project References</strong> and select <span class="caps">STD</span> and <span class="caps">IEEE</span> as a project references.</li>		<li>Remove the virtual folder <code>Common Libraries</code> from the <code>my_lib</code> project.</li>		<li>Map the entire project to the correct library (<code>my_lib</code>): <strong>right-click on the project &gt; Library Mapping &gt; New Library&#8230;</strong></li>		<li>If the project contains any <a href="http://www.sigasi.com/faq/junk-files"><em>stale</em></a> <span class="caps">VHDL</span> files, unmap them. <strong>Right-click &gt; Library Mapping &gt; Unmap</strong></li>		<li>Compile the project (since the automatic builder is turned off): <strong>Project &gt; Clean &gt; Clean all projects</strong> and <strong>Project &gt; Build</strong>.</li>	</ol><p>As you add more and more projects, your projects will depend on each other too. Make sure you set the correct dependencies in step 1.<br/>You have to make project dependencies <em>explicit</em> in Sigasi. This may seem like a bit more work, but is also helps you keep a clean and clear project structure. </p>	<p><em>Don't forget to turn the autobuilder back on. <strong>Project &gt; Build automatically</strong></em></p>	<p><span class="inline inline-right"><a href="http://www.sigasi.com/sites/www.sigasi.com/files/images/multi-project.png" onclick="launch_popup(1452, 1024, 768); return false;" target="_blank"><img src="http://www.sigasi.com/sites/www.sigasi.com/files/images/multi-project.img_assist_custom-300x225.png" alt="Setting up GRLIB as a multi-project" title="Setting up GRLIB as a multi-project" class="image image-img_assist_custom-300x225 " width="300" height="225"/></a><span class="caption" style="width: 298px;"><strong>Setting up <span class="caps">GRLIB</span> as a multi-project</strong></span></span></p>	<h2>Pros and Cons</h2>	<p>This is a robust way of organizing large projects. Setting projects up takes extra time, say about half an hour for larger projects. Having separate reusable blocks in separate projects makes it easier to work in teams and to deal with third party IP.</p>	<h2>When to use</h2>	<p>If you are working on a serious industrial design, with reusable in-house IP and/or third party IP, we would recommend the <strong>one IP block per project</strong> approach.<br/>We especially recommended it for any mid or large scale project, or:	</p><ul><li>If you have more than 5 <span class="caps">VHDL</span> libraries</li>		<li>If you are using third-party code that you don't want to modify</li>		<li>If you are working on several designs with shared libraries and IP blocks.</li>	</ul><h2>Real life: <span class="caps">GRLIB</span></h2>	<p>To show you an example of how to get started, I have created <a href="/screencast/organizing-grlib-one-project-library">a video where I set up the first few libraries</a> in the open source <a href="http://www.gaisler.com/" class="elf-external elf-icon"><span class="caps">GRLIB</span></a> collection. <br/>You can also download <a href="/sites/www.sigasi.com/files/grlib-gpl-1.1.0-b4113-sigasi.zip" title="and a few of its example designs">a zip file with the all the <span class="caps">GRLIB</span> libraries</a>. Use <strong>File &gt; Import&#8230; &gt; General &gt; Existing Projects into Workspace</strong>. Then <strong>Select archive file</strong>, <strong>Select All</strong> and click <strong>Finish</strong>. Importing and compiling everything will take a few minutes.<br/></p>  <div id="book-navigation-1518" class="book-navigation">            <div class="page-links clear-block">              <a href="/content/one-design-one-folder" class="page-previous" title="Go to previous page">&#8249; One design in one folder</a>                    <a href="/content/setting-project" class="page-up" title="Go to parent page">up</a>                    <a href="/content/organizing-legacy-projects" class="page-next" title="Go to next page">Organizing legacy projects &#8250;</a>          </div>      </div>  </div>

