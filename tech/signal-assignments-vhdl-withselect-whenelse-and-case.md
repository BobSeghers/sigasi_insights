---
title: "Signal Assignments in VHDL: with/select, when/else and case"
layout: page 
pager: true
author: philippe.faes (Sigasi)
date: 2011-07-04
tags: 
  - case
  - VHDL
  - when-else
  - with-select
---
<div class="content">
<p>Sometimes, there is more than one way to do something in <span class="caps">VHDL</span>. OK, <em>most of the time</em>, you can do things in many ways in <span class="caps">VHDL</span>. Let's look at the situation where you want to assign different values to a signal, based on the value of another signal.</p>	<h3>With / Select </h3>	<p>The most specific way to do this is with as selected signal assignment. Based on several possible values of <code>a</code>, you assign a value to <code>b</code>. No redundancy in the code here. The official name for this <span class="caps">VHDL</span> with/select assignment is the <em>selected signal assignment</em>.<br/></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"><span style="color: #7f0055; font-weight: bold;">with</span> a <span style="color: #7f0055; font-weight: bold;">select</span> b <span style="color: #000066;">&lt;=</span>	<span style="color: #2a00ff;">"1000"</span> <span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"00"</span>,	<span style="color: #2a00ff;">"0100"</span> <span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"01"</span>,	<span style="color: #2a00ff;">"0010"</span> <span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"10"</span>,	<span style="color: #2a00ff;">"0001"</span> <span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"11"</span><span style="color: #000066;">;</span></pre></div>	<h3>When / Else Assignment</h3>	<p>The construct of a <em>conditional signal assignment</em> is a little more general. For each option, you have to give a condition. This means that you could write any boolean expression as a condition, which give you more freedom than equality checking. While this construct would give you more freedom, there is a bit more redundancy too. We had to write the equality check (<code>a =</code>) on every line. If you use a signal with a long name, this will make your code bulkier. Also, the separator that's used in the selected signal assingment was a comma. In the conditional signal assingment, you need the <code>else</code> keyword. More code for the same functionality. Official name for this <span class="caps">VHDL</span> when/else assignment is the <em>conditional signal assignment</em></p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;">b <span style="color: #000066;">&lt;=</span> <span style="color: #2a00ff;">"1000"</span> <span style="color: #7f0055; font-weight: bold;">when</span> a <span style="color: #000066;">=</span> <span style="color: #2a00ff;">"00"</span> <span style="color: #7f0055; font-weight: bold;">else</span> 	 <span style="color: #2a00ff;">"0100"</span> <span style="color: #7f0055; font-weight: bold;">when</span> a <span style="color: #000066;">=</span> <span style="color: #2a00ff;">"01"</span> <span style="color: #7f0055; font-weight: bold;">else</span> 	 <span style="color: #2a00ff;">"0010"</span> <span style="color: #7f0055; font-weight: bold;">when</span> a <span style="color: #000066;">=</span> <span style="color: #2a00ff;">"10"</span> <span style="color: #7f0055; font-weight: bold;">else</span> 	 <span style="color: #2a00ff;">"0001"</span> <span style="color: #7f0055; font-weight: bold;">when</span> a <span style="color: #000066;">=</span> <span style="color: #2a00ff;">"11"</span><span style="color: #000066;">;</span></pre></div>	<h3>Combinational Process with Case Statement</h3>	<p>The most generally usable construct is a process. Inside this process, you can write a case statement, or a cascade of if statements. There is even more redundancy here. You the skeleton code for a process (begin, end) and the sensitivity list. That's not a big effort, but while I was drafting this, I had put <code>b</code> in the sensitivity list instead of <code>a</code>. Easy to make a small misstake. You also need to specify what happens in the <code>other</code> cases. Of course, you could do the same thing with a bunch of IF-statements, either consecutive or nested, but a case statement looks so much nicer.</p><div class="geshifilter"><pre class="vhdl geshifilter-vhdl" style="font-family:monospace;"><span style="color: #7f0055; font-weight: bold;">process</span><span style="color: #000000;">(</span>a<span style="color: #000000;">)</span><span style="color: #7f0055; font-weight: bold;">begin</span>	<span style="color: #7f0055; font-weight: bold;">case</span> a <span style="color: #7f0055; font-weight: bold;">is</span>		<span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"00"</span> <span style="color: #000066;">=&gt;</span> b <span style="color: #000066;">&lt;=</span> <span style="color: #2a00ff;">"1000"</span><span style="color: #000066;">;</span>		<span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"01"</span> <span style="color: #000066;">=&gt;</span> b <span style="color: #000066;">&lt;=</span> <span style="color: #2a00ff;">"0100"</span><span style="color: #000066;">;</span>		<span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"10"</span> <span style="color: #000066;">=&gt;</span> b <span style="color: #000066;">&lt;=</span> <span style="color: #2a00ff;">"0010"</span><span style="color: #000066;">;</span>		<span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #2a00ff;">"11"</span> <span style="color: #000066;">=&gt;</span> b <span style="color: #000066;">&lt;=</span> <span style="color: #2a00ff;">"0001"</span><span style="color: #000066;">;</span>		<span style="color: #7f0055; font-weight: bold;">when</span> <span style="color: #7f0055; font-weight: bold;">others</span> <span style="color: #000066;">=&gt;</span> <span style="color: #7f0055; font-weight: bold;">report</span> <span style="color: #2a00ff;">"unreachable"</span> <span style="color: #7f0055; font-weight: bold;">severity</span> <span style="color: #7f0055; font-weight: bold;">failure</span><span style="color: #000066;">;</span>	<span style="color: #7f0055; font-weight: bold;">end</span> <span style="color: #7f0055; font-weight: bold;">case</span><span style="color: #000066;">;</span><span style="color: #7f0055; font-weight: bold;">end</span> <span style="color: #7f0055; font-weight: bold;">process</span><span style="color: #000066;">;</span></pre></div>	<p>While this last code snippet is the largest and perhaps most error-prone, it is probably also the most common. It uses two familiar and often-used constructs: the process and the case statements. </p>	<h3>Hard to remember</h3>	<p>The problem with the selected and conditional signal assignments is that there is no logic in their syntax. The meaning is <em>almost</em> identical, but the syntax is just different enough to throw you off. I know <em>many</em> engineers who permanenty have a copy of the Doulos Golden Reference Guide to <span class="caps">VHDL</span> lying on their desks. Which is good for Doulos, because their name gets mentioned all the time. But most people just memorize one way of getting the job done and stick with it.</p>  <div id="book-navigation-1518" class="book-navigation">            <div class="page-links clear-block">              <a href="/content/name-shadowing-vhdl" class="page-previous" title="Go to previous page">&#8249; Name shadowing in VHDL</a>                    <a href="/content/vhdl-tips-tricks" class="page-up" title="Go to parent page">up</a>                    <a href="/content/to-downto-ranges-vhdl" class="page-next" title="Go to next page">To "to" or to "downto"... Ranges in VHDL &#8250;</a>          </div>      </div>  </div>

