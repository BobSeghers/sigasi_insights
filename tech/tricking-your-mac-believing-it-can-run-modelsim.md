---
title: "Tricking your Mac in to Believing it can run ModelSim"
layout: page 
pager: true
author: philippe.faes (Sigasi)
date: 2011-07-28
tags: 
  - modelsim
  - Mac
---
<div class="content">
<p><strong>Disclaimer 1:</strong> This is in no way a crack; we're not messing with ModelSim! You'll need a legal copy and a valid license, which you can get from your Mentor Graphics sales rep, or (a limited version, free of charge) from the <a href="http://www.altera.com/products/software/quartus-ii/web-edition/qts-we-index.html" class="elf-external elf-icon">Altera website</a></p>	<p><strong>Disclaimer 2:</strong> Consider this semi-advanced stuff. I'm sharing this idea because I think it will be useful to other people, it is <em>not</em> a supported Sigasi feature.</p>	<p><strong>Disclaimer 3:</strong> I hate discaimers!</p>	<p>We will need a computer with <span class="caps">SSH</span> acces that has a working version of ModelSim installed. I suggest you use a <em>Linux</em> computer because Mac <span class="caps">OSX</span> and Linux are both Unix-like systems. If you use a Windows compile server, you may run in to troubles with the path format (backslashes on Windows!). You can either use a remote computer, or set up a virtual machine (using something like <a href="http://www.parallels.com/products/desktop/" class="elf-external elf-icon">Parallels</a> or <a href="http://www.virtualbox.org/" class="elf-external elf-icon">VirtualBox</a>) on your Mac.</p>	<p>You will need the following info:	</p><ul><li>the host name (or IP address) of your build server</li>		<li>your user name on that server</li>		<li>the install path of ModelSim on the server</li>	</ul><p>You also need to set up an <a href="http://www.eng.cam.ac.uk/help/jpmg/ssh/authorized_keys_howto.html" class="elf-external elf-icon"><span class="caps">SSH</span> key</a> so that you can log on to the server without typing your password.</p>	<p>Next, we will create a fake ModelSim installation dir on the Mac. This directory will contain one script, <code>remote_modelsim.sh</code> and several symlinks to this script.</p><pre><code>mkdir ~/fakeModelSimcd ~/fakeModelSimtouch remote_modelsim.shln -s  remote_modelsim.sh vsimln -s  remote_modelsim.sh vcomln -s  remote_modelsim.sh vlib</code></pre>	<p>The fakeModelSim script copies the files to the build server and executes the specified ModelSim command. </p><pre><code>#!/bin/sh</code><code>#configurationREMOTE_USER=john.doeREMOTE_HOST=122.22.22.221REMOTE_HOME='/home/john.doe'REMOTE_MODELSIM_DIR='/opt/altera/10.0/modelsim_ase/bin'</code><code>COMMAND=`basename $0`# calculate the arguments, with proper quotes around each argumentfor ARG in "$@"do        ARGS="$ARGS \"$ARG\""done</code><code># Calculate a directory on the remote build server, where we can put our dataHASH=$(echo ${PWD} ${HOSTNAME} ${USER} | shasum | cut -c1-32)REMOTE_DIR=${REMOTE_HOME}/remote_compilation/${HASH}</code><code># sync the project directory. You don't need this if you are using a network shared folder.function try_rsync(){	rsync -r ${PWD}/* ${REMOTE_USER}@${REMOTE_HOST}:${REMOTE_DIR}}function createRemoteDir(){    echo "rsync failed, probably because the remote directory $REMOTE_DIR did not exits. Retrying." &gt;&amp;2	ssh ${REMOTE_USER}@${REMOTE_HOST} "mkdir -p ${REMOTE_DIR}"}try_rsync || ( createRemoteDir &amp;&amp; try_rsync ) || exit -1# end sync</code><code>REMOTE_SCRIPT=\"cd ${REMOTE_DIR}; "\"MODELSIM_DIR=/opt/altera/10.0/modelsim_ase/bin ; "\"/opt/altera/10.0/modelsim_ase/bin/$COMMAND $ARGS"</code><code># echo "# Running remote command $REMOTE_SCRIPT"ssh ${REMOTE_USER}@${REMOTE_HOST}  $REMOTE_SCRIPT</code></pre>	<p>Now all you need to do, is tell Sigasi (or whatever tool you are using) to use <code>~/fakeModelSim</code> as path for the ModelSim executables.</p>	<h2>Other tools and Feedback</h2>	<p>Al of this will work just as well with <em>Xilinx ISim</em>, or with the <em>Altera Quartus II</em>, or for a million other <span class="caps">EDA</span> and non-<span class="caps">EDA</span> tools. You can extend the script to copy the compiled files back to your local computer, or you can use a shared folder instead of <code>rsync</code>. Feel free to improve and share.</p>	<h2>Setting up Sigasi</h2>	<p>If you want to let Sigasi work with Aldec RivieraPro or ModelSim, you can <a href="/doc/2.8.0/integration_vcom">set it up as save-time compiler</a> or you can <a href="/doc/2.8.0/integration_export">generate a Makefile</a></p>	<p>Do you like this script? Do you like you Mac? Do you have a better way of designing hardware with your Mac? Talk to me in the comments section, below!</p>  </div>

